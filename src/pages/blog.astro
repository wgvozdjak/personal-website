---
import { SITE_TITLE, SITE_DESCRIPTION } from '../config';
import CorePage from '../layouts/CorePage.astro';

import '@fontsource/ibm-plex-sans/700.css'
import '@fontsource/ibm-plex-sans/600.css'
import '@fontsource/ibm-plex-sans/400.css'
import '@fontsource/ibm-plex-sans/300.css'

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob('./blog/*.{md,mdx}')).sort(
	(a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()
);

const content = {
	title: SITE_TITLE,
	description: SITE_DESCRIPTION,
	pageTitle: "Blog",
	pageDescription: "Thoughts and musings about math, programming, and more.",
}
---

<CorePage content={content}>
	<section>
		<ul class="list-none grid grid-cols-3 gap-4">
			{posts.map((post) => (
				<li class="flex">
					<a class="font-ibm-plex-sans font-normal block w-full p-4 border-solid border-[1px] dark:border-slate-300 rounded-md hover:dark:border-sky-700 group transition duration-[150ms]" href={post.url}>
						<h2 class="dark:text-slate-300 text-xl group-hover:dark:text-sky-500 transition font-semibold">{post.frontmatter.title}</h2>
						<time class="italic dark:text-slate-500 group-hover:dark:text-sky-700 transition" datetime={post.frontmatter.pubDate}>
							{new Date(post.frontmatter.pubDate).toLocaleDateString('en-us', {
								year: 'numeric',
								month: 'short',
								day: 'numeric',
							})}
						</time>
						<div class="group-hover:dark:text-sky-500 dark:text-slate-300 mt-2 w-full transition">
							{post.frontmatter.description}
						</div>
					</a>
				</li>
			))}
		</ul>
	</section>
</CorePage>
